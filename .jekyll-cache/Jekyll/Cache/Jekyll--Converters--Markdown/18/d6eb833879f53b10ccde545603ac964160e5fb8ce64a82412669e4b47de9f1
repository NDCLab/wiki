I"5<h1 id="python-ci-workflow">Python CI Workflow</h1>

<p>Continuous Integration is the practice of automatically merging developer work that has been checked
by tools into a main branch of work in a <a href="https://en.wikipedia.org/wiki/Version_control">Version Control
System</a>.</p>

<p>This is necessary to check code for correctness when it is added to the repository and that it
meets the Lab’s guidelines. This is a very useful way to make sure that the data that is being
generated by the program or script is trustworthy.</p>

<h2 id="overview">Overview</h2>

<p><a href="https://docs.github.com/en/free-pro-team@latest/actions">GitHub Actions</a> is a tool available to
GitHub projects and is used to perform Continuous Integration (CI) tasks. Tasks include
<a href="https://en.wikipedia.org/wiki/Lint_(software)">linting</a> code and checking if the code complies with
lab styling standards.</p>

<p>For python, we will use <a href="https://pylint.org/">pylint</a> a linter which will test code for syntactic
errors and <a href="https://github.com/pycqa/pycodestyle">pycodestyle</a> or a style checker for compliance
with the lab code style guide. These are the two checks that will be used on all projects that
contain Python code.</p>

<h2 id="using-github-actions-on-a-repository">Using GitHub Actions on a Repository</h2>

<p>To start a new Python project, create a new project and copy or download this
<a href="https://github.com/NDCLab/templates/blob/main/project_bases/python_ci/.github/workflows/python_ci.yaml">template</a>.
This will include a <a href="https://en.wikipedia.org/wiki/YAML">YAML</a> configuration file, a shell script,
and a <a href="https://pip.pypa.io/en/stable/">pip</a> dependency text file.</p>

<p>The YAML configuration file will have the options to run the GitHub Action. The shell script
<code class="language-plaintext highlighter-rouge">run_tests.sh</code> will be a <a href="https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29">Bash</a> script that is
called from the GitHub Action <a href="https://en.wikipedia.org/wiki/Virtual_machine">virtual machine</a> to
run the Python checks. The <code class="language-plaintext highlighter-rouge">requirements-dev.txt</code> file is a
<a href="https://pip.pypa.io/en/stable/reference/pip_install/#example-requirements-file">requirements</a> file
to install the Python dependencies needed using <code class="language-plaintext highlighter-rouge">pip</code> to run the checks.</p>

<h2 id="using-github-actions">Using GitHub Actions</h2>

<p>Once you upload changes you can access the GitHub Actions by going to the “Actions” tab:</p>

<p><img src="https://raw.githubusercontent.com/NDCLab/wiki/main/docs/_assets/gh_actions/actions.png" alt="actions" /></p>

<p>You will have workflows on the left, these are custom named CI workflows. By default all Python
projects will have <code class="language-plaintext highlighter-rouge">Python-CI</code> which will have the lint check, code style check, and python tests
check.</p>

<p><img src="https://raw.githubusercontent.com/NDCLab/wiki/main/docs/_assets/gh_actions/workflows.png" alt="workflows" /></p>

<p>On the right, you will see “All workflows” which is a list of all results from running the actions.</p>

<p><img src="https://raw.githubusercontent.com/NDCLab/wiki/main/docs/_assets/gh_actions/all_workflows.png" alt="all
workflows" /></p>

<p>To see a more detailed look click on the name in bold:</p>

<p><img src="https://raw.githubusercontent.com/NDCLab/wiki/main/docs/_assets/gh_actions/press_build.png" alt="check" /></p>

<p>Here you will see the information for the job that was run and the to see the output log for the job
click on the floating build button:</p>

<p><img src="https://raw.githubusercontent.com/NDCLab/wiki/main/docs/_assets/gh_actions/log_output.png" alt="build log
output" /></p>

<blockquote>
  <p>Note: Builds will run for the specific branch you have pushed, as long as the YAML configuration
files exists so make sure when creating a feature branch that the <code class="language-plaintext highlighter-rouge">.github/workflow/</code> directory
exists.</p>
</blockquote>

<h2 id="build-badge">Build Badge</h2>

<p>A build badge is a simple way to tell the users of your code that the code is functioning correctly. 
This allows the user to decide quickly whether is worth it to try to go through the install or not. 
Without the badge, a user would have to risk downloading and installing the software only to find out 
it does not work. It also helps contributers and maintainers have an easy visual check of whether a 
branch is working or not.</p>

<p>To add the <code class="language-plaintext highlighter-rouge">build</code> badge to the README or any other document go to the
<a href="https://shields.io/category/build">shields.io</a> site and search for “GitHub Workflow Status”. The
two options to look for are “GitHub Workflow Status” and “GitHub Workflow Status (branch):”, select
one by clicking on the name or build button. It will prompt you to write the organization/user and
repository and then click “Copy Badge URL”.</p>

<h2 id="why-actions-are-important">Why Actions are Important</h2>

<p>Code correctness and good style formatting. Testing code on every push to the repository, for
example when submitting a bug fix, decreases the chances of re-introducing old bugs or introducing
new ones Keeping code looking clean and well formatted using the lab style guide makes it so that 
anyone in the lab can look at someone else’s code and be able to better understand it. This makes 
it easier for collaboration to occur across teams, and people that would like to contribute to 
projects in the lab.</p>

<h2 id="additional-resources">Additional Resources</h2>

<ul>
  <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/learn-github-actions">GitHub Guides</a></li>
  <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/guides/building-and-testing-python">Building and testing on
  Python</a></li>
  <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions">YAML
  Options</a></li>
</ul>
:ET