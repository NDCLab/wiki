<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Python CI Workflow - Neural Dynamics of Control Laboratory</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Python CI Workflow | Neural Dynamics of Control Laboratory</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="Python CI Workflow" /> <meta property="og:locale" content="en_US" /> <meta property="og:site_name" content="Neural Dynamics of Control Laboratory" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Python CI Workflow" /> <script type="application/ld+json"> {"@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://www.ndclab.com/wp-content/uploads/2020/05/NDCLabWebLogo.png"}},"url":"/docs/technical-docs/python-ci-workflow.html","headline":"Python CI Workflow","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/welcome" class="nav-list-link">Welcome</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/welcome/lab-culture.html" class="nav-list-link">Lab Culture</a></li><li class="nav-list-item "><a href="/docs/welcome/whos-who.html" class="nav-list-link">Who's Who</a></li><li class="nav-list-item "><a href="/docs/welcome/cog-control.html" class="nav-list-link">Cognitive Control</a></li><li class="nav-list-item "><a href="/docs/welcome/lab-structure.html" class="nav-list-link">Lab Structure</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/onboarding" class="nav-list-link">Onboarding</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/Onboarding/overview.html" class="nav-list-link">Overview</a></li><li class="nav-list-item "><a href="/docs/Onboarding/certifications.html" class="nav-list-link">Certifications</a></li><li class="nav-list-item "><a href="/docs/Onboarding/ccf-access.html" class="nav-list-link">CCF Access</a></li><li class="nav-list-item "><a href="/docs/Onboarding/accessing-hpc.html" class="nav-list-link">HPC Access</a></li><li class="nav-list-item "><a href="/docs/Onboarding/ad-account.html" class="nav-list-link">AD Account</a></li><li class="nav-list-item "><a href="/docs/Onboarding/slack-setup.html" class="nav-list-link">Slack Setup</a></li><li class="nav-list-item "><a href="/docs/Onboarding/get-with-git.html" class="nav-list-link">Get with Git</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/around-the-lab" class="nav-list-link">Around the Lab</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/around-the-lab/community-standards.html" class="nav-list-link">Community Standards</a></li><li class="nav-list-item "><a href="/docs/around-the-lab/roles-expectations.html" class="nav-list-link">Roles & Expectations</a></li><li class="nav-list-item "><a href="/docs/around-the-lab/lab-meeting.html" class="nav-list-link">Lab Meetings</a></li><li class="nav-list-item "><a href="/docs/around-the-lab/report-concerns.html" class="nav-list-link">Reporting Concerns</a></li><li class="nav-list-item "><a href="/docs/around-the-lab/taking-time.html" class="nav-list-link">Taking Time Away</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/etiquette" class="nav-list-link">Etiquette</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/etiquette/naming-conventions.html" class="nav-list-link">Naming Conventions</a></li><li class="nav-list-item "><a href="/docs/etiquette/programming-standards.html" class="nav-list-link">Programming Standards</a></li><li class="nav-list-item "><a href="/docs/etiquette/github-etiquette.html" class="nav-list-link">GitHub Etiquette</a></li><li class="nav-list-item "><a href="/docs/etiquette/github-templates.html" class="nav-list-link">GitHub Templates</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/current-projects" class="nav-list-link">Current Projects</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/current-projects/social-context-alpha.html" class="nav-list-link">social-context-alpha</a></li><li class="nav-list-item "><a href="/docs/current-projects/rwe-alpha.html" class="nav-list-link">rwe-alpha</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/technical-docs" class="nav-list-link">Technical Documentation</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/technical-docs/docker-usage.html" class="nav-list-link">Docker</a></li><li class="nav-list-item "><a href="/docs/technical-docs/git_and_github.html" class="nav-list-link">Git + GitHub</a></li><li class="nav-list-item "><a href="/docs/technical-docs/instruments.html" class="nav-list-link">Instruments</a></li><li class="nav-list-item "><a href="/docs/technical-docs/pavlovia.html" class="nav-list-link">Pavlovia + GitLab</a></li><li class="nav-list-item "><a href="/docs/technical-docs/pepper-usage.html" class="nav-list-link">PEPPER</a></li><li class="nav-list-item active"><a href="/docs/technical-docs/python-ci-workflow.html" class="nav-list-link active">Python CI Workflow</a></li><li class="nav-list-item "><a href="/docs/technical-docs/shell.html" class="nav-list-link">Shell</a></li><li class="nav-list-item "><a href="/docs/technical-docs/zenhub.html" class="nav-list-link">ZenHub</a></li><li class="nav-list-item "><a href="/docs/technical-docs/zotero.html" class="nav-list-link">Zotero</a></li></ul></li><li class="nav-list-item"><a href="/docs/contributing.html" class="nav-list-link">Contributing</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/hpc" class="nav-list-link">HPC</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/hpc/accessing.html" class="nav-list-link">Accessing the HPC</a></li><li class="nav-list-item "><a href="/docs/hpc/R.html" class="nav-list-link">R</a></li><li class="nav-list-item "><a href="/docs/hpc/matlab.html" class="nav-list-link">Matlab</a></li><li class="nav-list-item "><a href="/docs/hpc/jobs.html" class="nav-list-link">Job Submission</a></li><li class="nav-list-item "><a href="/docs/hpc/status.html" class="nav-list-link">HPC Status</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/NDCLab/wiki" class="site-button" > NDC Lab on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/technical-docs">Technical Documentation</a></li> <li class="breadcrumb-nav-list-item"><span>Python CI Workflow</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="python-ci-workflow"> <a href="#python-ci-workflow" class="anchor-heading" aria-labelledby="python-ci-workflow"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Python CI Workflow </h1> <p>Continuous Integration is the practice of automatically merging developer work that has been checked by tools into a main branch of work in a <a href="https://en.wikipedia.org/wiki/Version_control">Version Control System</a>.</p> <p>This is necessary to check code for correctness when it is added to the repository and that it meets the Lab’s guidelines. This is a very useful way to make sure that the data that is being generated by the program or script is trustworthy.</p> <h2 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h2> <p><a href="https://docs.github.com/en/free-pro-team@latest/actions">GitHub Actions</a> is a tool available to GitHub projects and is used to perform Continuous Integration (CI) tasks. Tasks include <a href="https://en.wikipedia.org/wiki/Lint_(software)">linting</a> code and checking if the code complies with lab styling standards.</p> <p>For python, we will use <a href="https://pylint.org/">pylint</a> a linter which will test code for syntactic errors and <a href="https://github.com/pycqa/pycodestyle">pycodestyle</a> or a style checker for compliance with the lab code style guide. These are the two checks that will be used on all projects that contain Python code.</p> <h2 id="using-github-actions-on-a-repository"> <a href="#using-github-actions-on-a-repository" class="anchor-heading" aria-labelledby="using-github-actions-on-a-repository"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using GitHub Actions on a Repository </h2> <p>To start a new Python project, create a new project and copy or download this <a href="https://github.com/NDCLab/templates/blob/main/project_bases/python_ci/.github/workflows/python_ci.yaml">template</a>. This will include a <a href="https://en.wikipedia.org/wiki/YAML">YAML</a> configuration file, a shell script, and a <a href="https://pip.pypa.io/en/stable/">pip</a> dependency text file.</p> <p>The YAML configuration file will have the options to run the GitHub Action. The shell script <code class="language-plaintext highlighter-rouge">run_tests.sh</code> will be a <a href="https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29">Bash</a> script that is called from the GitHub Action <a href="https://en.wikipedia.org/wiki/Virtual_machine">virtual machine</a> to run the Python checks. The <code class="language-plaintext highlighter-rouge">requirements-dev.txt</code> file is a <a href="https://pip.pypa.io/en/stable/reference/pip_install/#example-requirements-file">requirements</a> file to install the Python dependencies needed using <code class="language-plaintext highlighter-rouge">pip</code> to run the checks.</p> <h2 id="using-github-actions"> <a href="#using-github-actions" class="anchor-heading" aria-labelledby="using-github-actions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using GitHub Actions </h2> <p>Once you upload changes you can access the GitHub Actions by going to the “Actions” tab:</p> <p><img src="https://raw.githubusercontent.com/NDCLab/wiki/main/docs/_assets/gh_actions/actions.png" alt="actions" /></p> <p>You will have workflows on the left, these are custom named CI workflows. By default all Python projects will have <code class="language-plaintext highlighter-rouge">Python-CI</code> which will have the lint check, code style check, and python tests check.</p> <p><img src="https://raw.githubusercontent.com/NDCLab/wiki/main/docs/_assets/gh_actions/workflows.png" alt="workflows" /></p> <p>On the right, you will see “All workflows” which is a list of all results from running the actions.</p> <p><img src="https://raw.githubusercontent.com/NDCLab/wiki/main/docs/_assets/gh_actions/all_workflows.png" alt="all workflows" /></p> <p>To see a more detailed look click on the name in bold:</p> <p><img src="https://raw.githubusercontent.com/NDCLab/wiki/main/docs/_assets/gh_actions/press_build.png" alt="check" /></p> <p>Here you will see the information for the job that was run and the to see the output log for the job click on the floating build button:</p> <p><img src="https://raw.githubusercontent.com/NDCLab/wiki/main/docs/_assets/gh_actions/log_output.png" alt="build log output" /></p> <blockquote> <p>Note: Builds will run for the specific branch you have pushed, as long as the YAML configuration files exists so make sure when creating a feature branch that the <code class="language-plaintext highlighter-rouge">.github/workflow/</code> directory exists.</p> </blockquote> <h2 id="build-badge"> <a href="#build-badge" class="anchor-heading" aria-labelledby="build-badge"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build Badge </h2> <p>A build badge is a simple way to tell the users of your code that the code is functioning correctly. This allows the user to decide quickly whether is worth it to try to go through the install or not. Without the badge, a user would have to risk downloading and installing the software only to find out it does not work. It also helps contributers and maintainers have an easy visual check of whether a branch is working or not.</p> <p>To add the <code class="language-plaintext highlighter-rouge">build</code> badge to the README or any other document go to the <a href="https://shields.io/category/build">shields.io</a> site and search for “GitHub Workflow Status”. The two options to look for are “GitHub Workflow Status” and “GitHub Workflow Status (branch):”, select one by clicking on the name or build button. It will prompt you to write the organization/user and repository and then click “Copy Badge URL”.</p> <h2 id="why-actions-are-important"> <a href="#why-actions-are-important" class="anchor-heading" aria-labelledby="why-actions-are-important"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Why Actions are Important </h2> <p>Code correctness and good style formatting. Testing code on every push to the repository, for example when submitting a bug fix, decreases the chances of re-introducing old bugs or introducing new ones Keeping code looking clean and well formatted using the lab style guide makes it so that anyone in the lab can look at someone else’s code and be able to better understand it. This makes it easier for collaboration to occur across teams, and people that would like to contribute to projects in the lab.</p> <h2 id="additional-resources"> <a href="#additional-resources" class="anchor-heading" aria-labelledby="additional-resources"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Additional Resources </h2> <ul> <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/learn-github-actions">GitHub Guides</a></li> <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/guides/building-and-testing-python">Building and testing on Python</a></li> <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions">YAML Options</a></li> </ul> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2022 Neural Dynamics of Control Laboratory</p> </footer> </div> </div> </div> </body> </html>
